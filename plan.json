{
	"format_version": "1.2",
	"terraform_version": "1.12.2",
	"variables": {
		"project_name": {
			"value": "etla-pipeline"
		}
	},
	"planned_values": {
		"root_module": {
			"resources": [
				{
					"address": "aws_apigatewayv2_api.http_api",
					"mode": "managed",
					"type": "aws_apigatewayv2_api",
					"name": "http_api",
					"provider_name": "registry.terraform.io/hashicorp/aws",
					"schema_version": 0,
					"values": {
						"api_key_selection_expression": "$request.header.x-api-key",
						"body": null,
						"cors_configuration": [],
						"credentials_arn": null,
						"description": null,
						"disable_execute_api_endpoint": null,
						"fail_on_warnings": null,
						"name": "etla-pipeline-api",
						"protocol_type": "HTTP",
						"region": "us-east-1",
						"route_key": null,
						"route_selection_expression": "$request.method $request.path",
						"tags": null,
						"target": null,
						"version": null
					},
					"sensitive_values": {
						"cors_configuration": [],
						"tags_all": {}
					}
				},
				{
					"address": "aws_apigatewayv2_authorizer.cognito_auth",
					"mode": "managed",
					"type": "aws_apigatewayv2_authorizer",
					"name": "cognito_auth",
					"provider_name": "registry.terraform.io/hashicorp/aws",
					"schema_version": 0,
					"values": {
						"authorizer_credentials_arn": null,
						"authorizer_payload_format_version": null,
						"authorizer_type": "JWT",
						"authorizer_uri": null,
						"enable_simple_responses": null,
						"identity_sources": [
							"$request.header.Authorization"
						],
						"jwt_configuration": [
							{}
						],
						"name": "etla-pipeline-cognito-auth",
						"region": "us-east-1",
						"timeouts": null
					},
					"sensitive_values": {
						"identity_sources": [
							false
						],
						"jwt_configuration": [
							{
								"audience": []
							}
						]
					}
				},
				{
					"address": "aws_apigatewayv2_integration.lambda_integration",
					"mode": "managed",
					"type": "aws_apigatewayv2_integration",
					"name": "lambda_integration",
					"provider_name": "registry.terraform.io/hashicorp/aws",
					"schema_version": 0,
					"values": {
						"connection_id": null,
						"connection_type": "INTERNET",
						"content_handling_strategy": null,
						"credentials_arn": null,
						"description": null,
						"integration_method": "POST",
						"integration_subtype": null,
						"integration_type": "AWS_PROXY",
						"passthrough_behavior": null,
						"payload_format_version": "2.0",
						"region": "us-east-1",
						"request_parameters": null,
						"request_templates": null,
						"response_parameters": [],
						"template_selection_expression": null,
						"tls_config": []
					},
					"sensitive_values": {
						"response_parameters": [],
						"tls_config": []
					}
				},
				{
					"address": "aws_apigatewayv2_route.default_route",
					"mode": "managed",
					"type": "aws_apigatewayv2_route",
					"name": "default_route",
					"provider_name": "registry.terraform.io/hashicorp/aws",
					"schema_version": 0,
					"values": {
						"api_key_required": false,
						"authorization_scopes": null,
						"authorization_type": "JWT",
						"model_selection_expression": null,
						"operation_name": null,
						"region": "us-east-1",
						"request_models": null,
						"request_parameter": [],
						"route_key": "POST /bus-event",
						"route_response_selection_expression": null
					},
					"sensitive_values": {
						"request_parameter": []
					}
				},
				{
					"address": "aws_apigatewayv2_stage.default_stage",
					"mode": "managed",
					"type": "aws_apigatewayv2_stage",
					"name": "default_stage",
					"provider_name": "registry.terraform.io/hashicorp/aws",
					"schema_version": 0,
					"values": {
						"access_log_settings": [],
						"auto_deploy": true,
						"client_certificate_id": null,
						"default_route_settings": [],
						"description": null,
						"name": "$default",
						"region": "us-east-1",
						"route_settings": [],
						"stage_variables": null,
						"tags": null
					},
					"sensitive_values": {
						"access_log_settings": [],
						"default_route_settings": [],
						"route_settings": [],
						"tags_all": {}
					}
				},
				{
					"address": "aws_cloudwatch_metric_alarm.high_priority_alerts",
					"mode": "managed",
					"type": "aws_cloudwatch_metric_alarm",
					"name": "high_priority_alerts",
					"provider_name": "registry.terraform.io/hashicorp/aws",
					"schema_version": 1,
					"values": {
						"actions_enabled": true,
						"alarm_description": "Triggers if more than 3 high priority alerts are processed in 5 minutes",
						"alarm_name": "HighPriorityAlertThreshold",
						"comparison_operator": "GreaterThanOrEqualToThreshold",
						"datapoints_to_alarm": null,
						"dimensions": null,
						"evaluation_periods": 1,
						"extended_statistic": null,
						"insufficient_data_actions": null,
						"metric_name": "HighPriorityAlerts",
						"metric_query": [],
						"namespace": "ETLA",
						"ok_actions": null,
						"period": 300,
						"region": "us-east-1",
						"statistic": "Sum",
						"tags": null,
						"threshold": 3,
						"threshold_metric_id": null,
						"treat_missing_data": "missing",
						"unit": null
					},
					"sensitive_values": {
						"alarm_actions": [],
						"metric_query": [],
						"tags_all": {}
					}
				},
				{
					"address": "aws_cloudwatch_metric_alarm.lambda_error_alarm",
					"mode": "managed",
					"type": "aws_cloudwatch_metric_alarm",
					"name": "lambda_error_alarm",
					"provider_name": "registry.terraform.io/hashicorp/aws",
					"schema_version": 1,
					"values": {
						"actions_enabled": true,
						"alarm_description": "Triggers if any Lambda errors occur",
						"alarm_name": "LambdaErrorThreshold",
						"comparison_operator": "GreaterThanThreshold",
						"datapoints_to_alarm": null,
						"dimensions": {
							"FunctionName": "etla-pipeline-handler"
						},
						"evaluation_periods": 1,
						"extended_statistic": null,
						"insufficient_data_actions": null,
						"metric_name": "Errors",
						"metric_query": [],
						"namespace": "AWS/Lambda",
						"ok_actions": null,
						"period": 300,
						"region": "us-east-1",
						"statistic": "Sum",
						"tags": null,
						"threshold": 0,
						"threshold_metric_id": null,
						"treat_missing_data": "missing",
						"unit": null
					},
					"sensitive_values": {
						"alarm_actions": [],
						"dimensions": {},
						"metric_query": [],
						"tags_all": {}
					}
				},
				{
					"address": "aws_cognito_user_pool.auth_pool",
					"mode": "managed",
					"type": "aws_cognito_user_pool",
					"name": "auth_pool",
					"provider_name": "registry.terraform.io/hashicorp/aws",
					"schema_version": 0,
					"values": {
						"account_recovery_setting": [],
						"alias_attributes": null,
						"auto_verified_attributes": null,
						"deletion_protection": "INACTIVE",
						"device_configuration": [],
						"email_configuration": [],
						"email_mfa_configuration": [],
						"lambda_config": [],
						"mfa_configuration": "OFF",
						"name": "etla-pipeline-user-pool",
						"region": "us-east-1",
						"schema": [],
						"sms_authentication_message": null,
						"software_token_mfa_configuration": [],
						"tags": null,
						"user_attribute_update_settings": [],
						"user_pool_add_ons": [],
						"username_attributes": null,
						"web_authn_configuration": []
					},
					"sensitive_values": {
						"account_recovery_setting": [],
						"admin_create_user_config": [],
						"device_configuration": [],
						"email_configuration": [],
						"email_mfa_configuration": [],
						"lambda_config": [],
						"password_policy": [],
						"schema": [],
						"sign_in_policy": [],
						"sms_configuration": [],
						"software_token_mfa_configuration": [],
						"tags_all": {},
						"user_attribute_update_settings": [],
						"user_pool_add_ons": [],
						"username_configuration": [],
						"verification_message_template": [],
						"web_authn_configuration": []
					}
				},
				{
					"address": "aws_cognito_user_pool_client.auth_client",
					"mode": "managed",
					"type": "aws_cognito_user_pool_client",
					"name": "auth_client",
					"provider_name": "registry.terraform.io/hashicorp/aws",
					"schema_version": 0,
					"values": {
						"allowed_oauth_flows_user_pool_client": true,
						"analytics_configuration": [],
						"explicit_auth_flows": [
							"ALLOW_REFRESH_TOKEN_AUTH",
							"ALLOW_USER_PASSWORD_AUTH"
						],
						"generate_secret": false,
						"name": "etla-pipeline-app-client",
						"refresh_token_rotation": [],
						"region": "us-east-1",
						"token_validity_units": []
					},
					"sensitive_values": {
						"allowed_oauth_flows": [],
						"allowed_oauth_scopes": [],
						"analytics_configuration": [],
						"callback_urls": [],
						"client_secret": true,
						"explicit_auth_flows": [
							false,
							false
						],
						"logout_urls": [],
						"read_attributes": [],
						"refresh_token_rotation": [],
						"supported_identity_providers": [],
						"token_validity_units": [],
						"write_attributes": []
					}
				},
				{
					"address": "aws_dynamodb_table.bus_data",
					"mode": "managed",
					"type": "aws_dynamodb_table",
					"name": "bus_data",
					"provider_name": "registry.terraform.io/hashicorp/aws",
					"schema_version": 1,
					"values": {
						"attribute": [
							{
								"name": "OccurredOn",
								"type": "S"
							},
							{
								"name": "RouteNumber",
								"type": "S"
							}
						],
						"billing_mode": "PAY_PER_REQUEST",
						"deletion_protection_enabled": null,
						"global_secondary_index": [],
						"hash_key": "RouteNumber",
						"import_table": [],
						"local_secondary_index": [],
						"name": "etla-pipeline-bus-events",
						"on_demand_throughput": [],
						"range_key": "OccurredOn",
						"region": "us-east-1",
						"replica": [],
						"restore_date_time": null,
						"restore_source_name": null,
						"restore_source_table_arn": null,
						"restore_to_latest_time": null,
						"stream_enabled": null,
						"table_class": null,
						"tags": {
							"Name": "Transformed Bus Events",
							"Project": "etla-pipeline"
						},
						"tags_all": {
							"Name": "Transformed Bus Events",
							"Project": "etla-pipeline"
						},
						"timeouts": null
					},
					"sensitive_values": {
						"attribute": [
							{},
							{}
						],
						"global_secondary_index": [],
						"import_table": [],
						"local_secondary_index": [],
						"on_demand_throughput": [],
						"point_in_time_recovery": [],
						"replica": [],
						"server_side_encryption": [],
						"tags": {},
						"tags_all": {},
						"ttl": []
					}
				},
				{
					"address": "aws_iam_policy.lambda_policy",
					"mode": "managed",
					"type": "aws_iam_policy",
					"name": "lambda_policy",
					"provider_name": "registry.terraform.io/hashicorp/aws",
					"schema_version": 0,
					"values": {
						"description": null,
						"name": "etla-pipeline-lambda-policy",
						"path": "/",
						"tags": null
					},
					"sensitive_values": {
						"tags_all": {}
					},
					"identity_schema_version": 0,
					"identity": {
						"arn": null
					}
				},
				{
					"address": "aws_iam_policy_attachment.lambda_custom_policy",
					"mode": "managed",
					"type": "aws_iam_policy_attachment",
					"name": "lambda_custom_policy",
					"provider_name": "registry.terraform.io/hashicorp/aws",
					"schema_version": 0,
					"values": {
						"groups": null,
						"name": "lambda-custom-policy-attachment",
						"roles": [
							"etla-pipeline-lambda-role"
						],
						"users": null
					},
					"sensitive_values": {
						"roles": [
							false
						]
					}
				},
				{
					"address": "aws_iam_role.lambda_exec",
					"mode": "managed",
					"type": "aws_iam_role",
					"name": "lambda_exec",
					"provider_name": "registry.terraform.io/hashicorp/aws",
					"schema_version": 0,
					"values": {
						"assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
						"description": null,
						"force_detach_policies": false,
						"max_session_duration": 3600,
						"name": "etla-pipeline-lambda-role",
						"path": "/",
						"permissions_boundary": null,
						"tags": null
					},
					"sensitive_values": {
						"inline_policy": [],
						"managed_policy_arns": [],
						"tags_all": {}
					},
					"identity_schema_version": 0,
					"identity": {
						"account_id": null,
						"name": null
					}
				},
				{
					"address": "aws_iam_role_policy_attachment.lambda_logs",
					"mode": "managed",
					"type": "aws_iam_role_policy_attachment",
					"name": "lambda_logs",
					"provider_name": "registry.terraform.io/hashicorp/aws",
					"schema_version": 0,
					"values": {
						"policy_arn": "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
						"role": "etla-pipeline-lambda-role"
					},
					"sensitive_values": {},
					"identity_schema_version": 0,
					"identity": {
						"account_id": null,
						"policy_arn": null,
						"role": null
					}
				},
				{
					"address": "aws_lambda_function.bus_event_handler",
					"mode": "managed",
					"type": "aws_lambda_function",
					"name": "bus_event_handler",
					"provider_name": "registry.terraform.io/hashicorp/aws",
					"schema_version": 0,
					"values": {
						"code_signing_config_arn": null,
						"dead_letter_config": [],
						"description": null,
						"environment": [
							{
								"variables": {
									"METRIC_NAMESPACE": "ETLA",
									"RAW_BUCKET_NAME": "etla-pipeline-raw",
									"TABLE_NAME": "etla-pipeline-bus-events"
								}
							}
						],
						"file_system_config": [],
						"filename": "lambda_function_payload.zip",
						"function_name": "etla-pipeline-handler",
						"handler": "main.handler",
						"image_config": [],
						"image_uri": null,
						"kms_key_arn": null,
						"layers": null,
						"memory_size": 128,
						"package_type": "Zip",
						"publish": false,
						"region": "us-east-1",
						"replace_security_groups_on_destroy": null,
						"replacement_security_group_ids": null,
						"reserved_concurrent_executions": -1,
						"runtime": "python3.11",
						"s3_bucket": null,
						"s3_key": null,
						"s3_object_version": null,
						"skip_destroy": false,
						"snap_start": [],
						"source_code_hash": "EL2rUkDKVlhSpNf/RZZza8mMDfG4/DFAzx0Pwq0I6MA=",
						"tags": {
							"Project": "etla-pipeline"
						},
						"tags_all": {
							"Project": "etla-pipeline"
						},
						"timeout": 10,
						"timeouts": null,
						"vpc_config": []
					},
					"sensitive_values": {
						"architectures": [],
						"dead_letter_config": [],
						"environment": [
							{
								"variables": {}
							}
						],
						"ephemeral_storage": [],
						"file_system_config": [],
						"image_config": [],
						"logging_config": [],
						"snap_start": [],
						"tags": {},
						"tags_all": {},
						"tracing_config": [],
						"vpc_config": []
					}
				},
				{
					"address": "aws_lambda_permission.allow_apigw",
					"mode": "managed",
					"type": "aws_lambda_permission",
					"name": "allow_apigw",
					"provider_name": "registry.terraform.io/hashicorp/aws",
					"schema_version": 0,
					"values": {
						"action": "lambda:InvokeFunction",
						"event_source_token": null,
						"function_name": "etla-pipeline-handler",
						"function_url_auth_type": null,
						"principal": "apigateway.amazonaws.com",
						"principal_org_id": null,
						"qualifier": null,
						"region": "us-east-1",
						"source_account": null,
						"statement_id": "AllowAPIGatewayInvoke"
					},
					"sensitive_values": {}
				},
				{
					"address": "aws_s3_bucket.raw_data",
					"mode": "managed",
					"type": "aws_s3_bucket",
					"name": "raw_data",
					"provider_name": "registry.terraform.io/hashicorp/aws",
					"schema_version": 0,
					"values": {
						"bucket": "etla-pipeline-raw",
						"force_destroy": true,
						"region": "us-east-1",
						"tags": {
							"Name": "Raw Data Bucket",
							"Project": "etla-pipeline"
						},
						"tags_all": {
							"Name": "Raw Data Bucket",
							"Project": "etla-pipeline"
						},
						"timeouts": null
					},
					"sensitive_values": {
						"cors_rule": [],
						"grant": [],
						"lifecycle_rule": [],
						"logging": [],
						"object_lock_configuration": [],
						"replication_configuration": [],
						"server_side_encryption_configuration": [],
						"tags": {},
						"tags_all": {},
						"versioning": [],
						"website": []
					},
					"identity_schema_version": 0,
					"identity": {
						"account_id": null,
						"bucket": null,
						"region": null
					}
				},
				{
					"address": "aws_sns_topic.alerts",
					"mode": "managed",
					"type": "aws_sns_topic",
					"name": "alerts",
					"provider_name": "registry.terraform.io/hashicorp/aws",
					"schema_version": 0,
					"values": {
						"application_failure_feedback_role_arn": null,
						"application_success_feedback_role_arn": null,
						"application_success_feedback_sample_rate": null,
						"archive_policy": null,
						"content_based_deduplication": false,
						"delivery_policy": null,
						"display_name": null,
						"fifo_topic": false,
						"firehose_failure_feedback_role_arn": null,
						"firehose_success_feedback_role_arn": null,
						"firehose_success_feedback_sample_rate": null,
						"http_failure_feedback_role_arn": null,
						"http_success_feedback_role_arn": null,
						"http_success_feedback_sample_rate": null,
						"kms_master_key_id": null,
						"lambda_failure_feedback_role_arn": null,
						"lambda_success_feedback_role_arn": null,
						"lambda_success_feedback_sample_rate": null,
						"name": "etla-pipeline-alerts",
						"region": "us-east-1",
						"sqs_failure_feedback_role_arn": null,
						"sqs_success_feedback_role_arn": null,
						"sqs_success_feedback_sample_rate": null,
						"tags": null
					},
					"sensitive_values": {
						"tags_all": {}
					},
					"identity_schema_version": 0,
					"identity": {
						"arn": null
					}
				}
			]
		}
	},
	"resource_changes": [
		{
			"address": "aws_apigatewayv2_api.http_api",
			"mode": "managed",
			"type": "aws_apigatewayv2_api",
			"name": "http_api",
			"provider_name": "registry.terraform.io/hashicorp/aws",
			"change": {
				"actions": [
					"create"
				],
				"before": null,
				"after": {
					"api_key_selection_expression": "$request.header.x-api-key",
					"body": null,
					"cors_configuration": [],
					"credentials_arn": null,
					"description": null,
					"disable_execute_api_endpoint": null,
					"fail_on_warnings": null,
					"name": "etla-pipeline-api",
					"protocol_type": "HTTP",
					"region": "us-east-1",
					"route_key": null,
					"route_selection_expression": "$request.method $request.path",
					"tags": null,
					"target": null,
					"version": null
				},
				"after_unknown": {
					"api_endpoint": true,
					"arn": true,
					"cors_configuration": [],
					"execution_arn": true,
					"id": true,
					"ip_address_type": true,
					"tags_all": true
				},
				"before_sensitive": false,
				"after_sensitive": {
					"cors_configuration": [],
					"tags_all": {}
				}
			}
		},
		{
			"address": "aws_apigatewayv2_authorizer.cognito_auth",
			"mode": "managed",
			"type": "aws_apigatewayv2_authorizer",
			"name": "cognito_auth",
			"provider_name": "registry.terraform.io/hashicorp/aws",
			"change": {
				"actions": [
					"create"
				],
				"before": null,
				"after": {
					"authorizer_credentials_arn": null,
					"authorizer_payload_format_version": null,
					"authorizer_type": "JWT",
					"authorizer_uri": null,
					"enable_simple_responses": null,
					"identity_sources": [
						"$request.header.Authorization"
					],
					"jwt_configuration": [
						{}
					],
					"name": "etla-pipeline-cognito-auth",
					"region": "us-east-1",
					"timeouts": null
				},
				"after_unknown": {
					"api_id": true,
					"authorizer_result_ttl_in_seconds": true,
					"id": true,
					"identity_sources": [
						false
					],
					"jwt_configuration": [
						{
							"audience": true,
							"issuer": true
						}
					]
				},
				"before_sensitive": false,
				"after_sensitive": {
					"identity_sources": [
						false
					],
					"jwt_configuration": [
						{
							"audience": []
						}
					]
				}
			}
		},
		{
			"address": "aws_apigatewayv2_integration.lambda_integration",
			"mode": "managed",
			"type": "aws_apigatewayv2_integration",
			"name": "lambda_integration",
			"provider_name": "registry.terraform.io/hashicorp/aws",
			"change": {
				"actions": [
					"create"
				],
				"before": null,
				"after": {
					"connection_id": null,
					"connection_type": "INTERNET",
					"content_handling_strategy": null,
					"credentials_arn": null,
					"description": null,
					"integration_method": "POST",
					"integration_subtype": null,
					"integration_type": "AWS_PROXY",
					"passthrough_behavior": null,
					"payload_format_version": "2.0",
					"region": "us-east-1",
					"request_parameters": null,
					"request_templates": null,
					"response_parameters": [],
					"template_selection_expression": null,
					"tls_config": []
				},
				"after_unknown": {
					"api_id": true,
					"id": true,
					"integration_response_selection_expression": true,
					"integration_uri": true,
					"response_parameters": [],
					"timeout_milliseconds": true,
					"tls_config": []
				},
				"before_sensitive": false,
				"after_sensitive": {
					"response_parameters": [],
					"tls_config": []
				}
			}
		},
		{
			"address": "aws_apigatewayv2_route.default_route",
			"mode": "managed",
			"type": "aws_apigatewayv2_route",
			"name": "default_route",
			"provider_name": "registry.terraform.io/hashicorp/aws",
			"change": {
				"actions": [
					"create"
				],
				"before": null,
				"after": {
					"api_key_required": false,
					"authorization_scopes": null,
					"authorization_type": "JWT",
					"model_selection_expression": null,
					"operation_name": null,
					"region": "us-east-1",
					"request_models": null,
					"request_parameter": [],
					"route_key": "POST /bus-event",
					"route_response_selection_expression": null
				},
				"after_unknown": {
					"api_id": true,
					"authorizer_id": true,
					"id": true,
					"request_parameter": [],
					"target": true
				},
				"before_sensitive": false,
				"after_sensitive": {
					"request_parameter": []
				}
			}
		},
		{
			"address": "aws_apigatewayv2_stage.default_stage",
			"mode": "managed",
			"type": "aws_apigatewayv2_stage",
			"name": "default_stage",
			"provider_name": "registry.terraform.io/hashicorp/aws",
			"change": {
				"actions": [
					"create"
				],
				"before": null,
				"after": {
					"access_log_settings": [],
					"auto_deploy": true,
					"client_certificate_id": null,
					"default_route_settings": [],
					"description": null,
					"name": "$default",
					"region": "us-east-1",
					"route_settings": [],
					"stage_variables": null,
					"tags": null
				},
				"after_unknown": {
					"access_log_settings": [],
					"api_id": true,
					"arn": true,
					"default_route_settings": [],
					"deployment_id": true,
					"execution_arn": true,
					"id": true,
					"invoke_url": true,
					"route_settings": [],
					"tags_all": true
				},
				"before_sensitive": false,
				"after_sensitive": {
					"access_log_settings": [],
					"default_route_settings": [],
					"route_settings": [],
					"tags_all": {}
				}
			}
		},
		{
			"address": "aws_cloudwatch_metric_alarm.high_priority_alerts",
			"mode": "managed",
			"type": "aws_cloudwatch_metric_alarm",
			"name": "high_priority_alerts",
			"provider_name": "registry.terraform.io/hashicorp/aws",
			"change": {
				"actions": [
					"create"
				],
				"before": null,
				"after": {
					"actions_enabled": true,
					"alarm_description": "Triggers if more than 3 high priority alerts are processed in 5 minutes",
					"alarm_name": "HighPriorityAlertThreshold",
					"comparison_operator": "GreaterThanOrEqualToThreshold",
					"datapoints_to_alarm": null,
					"dimensions": null,
					"evaluation_periods": 1,
					"extended_statistic": null,
					"insufficient_data_actions": null,
					"metric_name": "HighPriorityAlerts",
					"metric_query": [],
					"namespace": "ETLA",
					"ok_actions": null,
					"period": 300,
					"region": "us-east-1",
					"statistic": "Sum",
					"tags": null,
					"threshold": 3,
					"threshold_metric_id": null,
					"treat_missing_data": "missing",
					"unit": null
				},
				"after_unknown": {
					"alarm_actions": true,
					"arn": true,
					"evaluate_low_sample_count_percentiles": true,
					"id": true,
					"metric_query": [],
					"tags_all": true
				},
				"before_sensitive": false,
				"after_sensitive": {
					"alarm_actions": [],
					"metric_query": [],
					"tags_all": {}
				}
			}
		},
		{
			"address": "aws_cloudwatch_metric_alarm.lambda_error_alarm",
			"mode": "managed",
			"type": "aws_cloudwatch_metric_alarm",
			"name": "lambda_error_alarm",
			"provider_name": "registry.terraform.io/hashicorp/aws",
			"change": {
				"actions": [
					"create"
				],
				"before": null,
				"after": {
					"actions_enabled": true,
					"alarm_description": "Triggers if any Lambda errors occur",
					"alarm_name": "LambdaErrorThreshold",
					"comparison_operator": "GreaterThanThreshold",
					"datapoints_to_alarm": null,
					"dimensions": {
						"FunctionName": "etla-pipeline-handler"
					},
					"evaluation_periods": 1,
					"extended_statistic": null,
					"insufficient_data_actions": null,
					"metric_name": "Errors",
					"metric_query": [],
					"namespace": "AWS/Lambda",
					"ok_actions": null,
					"period": 300,
					"region": "us-east-1",
					"statistic": "Sum",
					"tags": null,
					"threshold": 0,
					"threshold_metric_id": null,
					"treat_missing_data": "missing",
					"unit": null
				},
				"after_unknown": {
					"alarm_actions": true,
					"arn": true,
					"dimensions": {},
					"evaluate_low_sample_count_percentiles": true,
					"id": true,
					"metric_query": [],
					"tags_all": true
				},
				"before_sensitive": false,
				"after_sensitive": {
					"alarm_actions": [],
					"dimensions": {},
					"metric_query": [],
					"tags_all": {}
				}
			}
		},
		{
			"address": "aws_cognito_user_pool.auth_pool",
			"mode": "managed",
			"type": "aws_cognito_user_pool",
			"name": "auth_pool",
			"provider_name": "registry.terraform.io/hashicorp/aws",
			"change": {
				"actions": [
					"create"
				],
				"before": null,
				"after": {
					"account_recovery_setting": [],
					"alias_attributes": null,
					"auto_verified_attributes": null,
					"deletion_protection": "INACTIVE",
					"device_configuration": [],
					"email_configuration": [],
					"email_mfa_configuration": [],
					"lambda_config": [],
					"mfa_configuration": "OFF",
					"name": "etla-pipeline-user-pool",
					"region": "us-east-1",
					"schema": [],
					"sms_authentication_message": null,
					"software_token_mfa_configuration": [],
					"tags": null,
					"user_attribute_update_settings": [],
					"user_pool_add_ons": [],
					"username_attributes": null,
					"web_authn_configuration": []
				},
				"after_unknown": {
					"account_recovery_setting": [],
					"admin_create_user_config": true,
					"arn": true,
					"creation_date": true,
					"custom_domain": true,
					"device_configuration": [],
					"domain": true,
					"email_configuration": [],
					"email_mfa_configuration": [],
					"email_verification_message": true,
					"email_verification_subject": true,
					"endpoint": true,
					"estimated_number_of_users": true,
					"id": true,
					"lambda_config": [],
					"last_modified_date": true,
					"password_policy": true,
					"schema": [],
					"sign_in_policy": true,
					"sms_configuration": true,
					"sms_verification_message": true,
					"software_token_mfa_configuration": [],
					"tags_all": true,
					"user_attribute_update_settings": [],
					"user_pool_add_ons": [],
					"user_pool_tier": true,
					"username_configuration": true,
					"verification_message_template": true,
					"web_authn_configuration": []
				},
				"before_sensitive": false,
				"after_sensitive": {
					"account_recovery_setting": [],
					"admin_create_user_config": [],
					"device_configuration": [],
					"email_configuration": [],
					"email_mfa_configuration": [],
					"lambda_config": [],
					"password_policy": [],
					"schema": [],
					"sign_in_policy": [],
					"sms_configuration": [],
					"software_token_mfa_configuration": [],
					"tags_all": {},
					"user_attribute_update_settings": [],
					"user_pool_add_ons": [],
					"username_configuration": [],
					"verification_message_template": [],
					"web_authn_configuration": []
				}
			}
		},
		{
			"address": "aws_cognito_user_pool_client.auth_client",
			"mode": "managed",
			"type": "aws_cognito_user_pool_client",
			"name": "auth_client",
			"provider_name": "registry.terraform.io/hashicorp/aws",
			"change": {
				"actions": [
					"create"
				],
				"before": null,
				"after": {
					"allowed_oauth_flows_user_pool_client": true,
					"analytics_configuration": [],
					"explicit_auth_flows": [
						"ALLOW_REFRESH_TOKEN_AUTH",
						"ALLOW_USER_PASSWORD_AUTH"
					],
					"generate_secret": false,
					"name": "etla-pipeline-app-client",
					"refresh_token_rotation": [],
					"region": "us-east-1",
					"token_validity_units": []
				},
				"after_unknown": {
					"access_token_validity": true,
					"allowed_oauth_flows": true,
					"allowed_oauth_scopes": true,
					"analytics_configuration": [],
					"auth_session_validity": true,
					"callback_urls": true,
					"client_secret": true,
					"default_redirect_uri": true,
					"enable_propagate_additional_user_context_data": true,
					"enable_token_revocation": true,
					"explicit_auth_flows": [
						false,
						false
					],
					"id": true,
					"id_token_validity": true,
					"logout_urls": true,
					"prevent_user_existence_errors": true,
					"read_attributes": true,
					"refresh_token_rotation": [],
					"refresh_token_validity": true,
					"supported_identity_providers": true,
					"token_validity_units": [],
					"user_pool_id": true,
					"write_attributes": true
				},
				"before_sensitive": false,
				"after_sensitive": {
					"allowed_oauth_flows": [],
					"allowed_oauth_scopes": [],
					"analytics_configuration": [],
					"callback_urls": [],
					"client_secret": true,
					"explicit_auth_flows": [
						false,
						false
					],
					"logout_urls": [],
					"read_attributes": [],
					"refresh_token_rotation": [],
					"supported_identity_providers": [],
					"token_validity_units": [],
					"write_attributes": []
				}
			}
		},
		{
			"address": "aws_dynamodb_table.bus_data",
			"mode": "managed",
			"type": "aws_dynamodb_table",
			"name": "bus_data",
			"provider_name": "registry.terraform.io/hashicorp/aws",
			"change": {
				"actions": [
					"create"
				],
				"before": null,
				"after": {
					"attribute": [
						{
							"name": "OccurredOn",
							"type": "S"
						},
						{
							"name": "RouteNumber",
							"type": "S"
						}
					],
					"billing_mode": "PAY_PER_REQUEST",
					"deletion_protection_enabled": null,
					"global_secondary_index": [],
					"hash_key": "RouteNumber",
					"import_table": [],
					"local_secondary_index": [],
					"name": "etla-pipeline-bus-events",
					"on_demand_throughput": [],
					"range_key": "OccurredOn",
					"region": "us-east-1",
					"replica": [],
					"restore_date_time": null,
					"restore_source_name": null,
					"restore_source_table_arn": null,
					"restore_to_latest_time": null,
					"stream_enabled": null,
					"table_class": null,
					"tags": {
						"Name": "Transformed Bus Events",
						"Project": "etla-pipeline"
					},
					"tags_all": {
						"Name": "Transformed Bus Events",
						"Project": "etla-pipeline"
					},
					"timeouts": null
				},
				"after_unknown": {
					"arn": true,
					"attribute": [
						{},
						{}
					],
					"global_secondary_index": [],
					"id": true,
					"import_table": [],
					"local_secondary_index": [],
					"on_demand_throughput": [],
					"point_in_time_recovery": true,
					"read_capacity": true,
					"replica": [],
					"server_side_encryption": true,
					"stream_arn": true,
					"stream_label": true,
					"stream_view_type": true,
					"tags": {},
					"tags_all": {},
					"ttl": true,
					"write_capacity": true
				},
				"before_sensitive": false,
				"after_sensitive": {
					"attribute": [
						{},
						{}
					],
					"global_secondary_index": [],
					"import_table": [],
					"local_secondary_index": [],
					"on_demand_throughput": [],
					"point_in_time_recovery": [],
					"replica": [],
					"server_side_encryption": [],
					"tags": {},
					"tags_all": {},
					"ttl": []
				}
			}
		},
		{
			"address": "aws_iam_policy.lambda_policy",
			"mode": "managed",
			"type": "aws_iam_policy",
			"name": "lambda_policy",
			"provider_name": "registry.terraform.io/hashicorp/aws",
			"change": {
				"actions": [
					"create"
				],
				"before": null,
				"after": {
					"description": null,
					"name": "etla-pipeline-lambda-policy",
					"path": "/",
					"tags": null
				},
				"after_unknown": {
					"arn": true,
					"attachment_count": true,
					"id": true,
					"name_prefix": true,
					"policy": true,
					"policy_id": true,
					"tags_all": true
				},
				"before_sensitive": false,
				"after_sensitive": {
					"tags_all": {}
				},
				"after_identity": {
					"arn": null
				}
			}
		},
		{
			"address": "aws_iam_policy_attachment.lambda_custom_policy",
			"mode": "managed",
			"type": "aws_iam_policy_attachment",
			"name": "lambda_custom_policy",
			"provider_name": "registry.terraform.io/hashicorp/aws",
			"change": {
				"actions": [
					"create"
				],
				"before": null,
				"after": {
					"groups": null,
					"name": "lambda-custom-policy-attachment",
					"roles": [
						"etla-pipeline-lambda-role"
					],
					"users": null
				},
				"after_unknown": {
					"id": true,
					"policy_arn": true,
					"roles": [
						false
					]
				},
				"before_sensitive": false,
				"after_sensitive": {
					"roles": [
						false
					]
				}
			}
		},
		{
			"address": "aws_iam_role.lambda_exec",
			"mode": "managed",
			"type": "aws_iam_role",
			"name": "lambda_exec",
			"provider_name": "registry.terraform.io/hashicorp/aws",
			"change": {
				"actions": [
					"create"
				],
				"before": null,
				"after": {
					"assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
					"description": null,
					"force_detach_policies": false,
					"max_session_duration": 3600,
					"name": "etla-pipeline-lambda-role",
					"path": "/",
					"permissions_boundary": null,
					"tags": null
				},
				"after_unknown": {
					"arn": true,
					"create_date": true,
					"id": true,
					"inline_policy": true,
					"managed_policy_arns": true,
					"name_prefix": true,
					"tags_all": true,
					"unique_id": true
				},
				"before_sensitive": false,
				"after_sensitive": {
					"inline_policy": [],
					"managed_policy_arns": [],
					"tags_all": {}
				},
				"after_identity": {
					"account_id": null,
					"name": null
				}
			}
		},
		{
			"address": "aws_iam_role_policy_attachment.lambda_logs",
			"mode": "managed",
			"type": "aws_iam_role_policy_attachment",
			"name": "lambda_logs",
			"provider_name": "registry.terraform.io/hashicorp/aws",
			"change": {
				"actions": [
					"create"
				],
				"before": null,
				"after": {
					"policy_arn": "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
					"role": "etla-pipeline-lambda-role"
				},
				"after_unknown": {
					"id": true
				},
				"before_sensitive": false,
				"after_sensitive": {},
				"after_identity": {
					"account_id": null,
					"policy_arn": null,
					"role": null
				}
			}
		},
		{
			"address": "aws_lambda_function.bus_event_handler",
			"mode": "managed",
			"type": "aws_lambda_function",
			"name": "bus_event_handler",
			"provider_name": "registry.terraform.io/hashicorp/aws",
			"change": {
				"actions": [
					"create"
				],
				"before": null,
				"after": {
					"code_signing_config_arn": null,
					"dead_letter_config": [],
					"description": null,
					"environment": [
						{
							"variables": {
								"METRIC_NAMESPACE": "ETLA",
								"RAW_BUCKET_NAME": "etla-pipeline-raw",
								"TABLE_NAME": "etla-pipeline-bus-events"
							}
						}
					],
					"file_system_config": [],
					"filename": "lambda_function_payload.zip",
					"function_name": "etla-pipeline-handler",
					"handler": "main.handler",
					"image_config": [],
					"image_uri": null,
					"kms_key_arn": null,
					"layers": null,
					"memory_size": 128,
					"package_type": "Zip",
					"publish": false,
					"region": "us-east-1",
					"replace_security_groups_on_destroy": null,
					"replacement_security_group_ids": null,
					"reserved_concurrent_executions": -1,
					"runtime": "python3.11",
					"s3_bucket": null,
					"s3_key": null,
					"s3_object_version": null,
					"skip_destroy": false,
					"snap_start": [],
					"source_code_hash": "EL2rUkDKVlhSpNf/RZZza8mMDfG4/DFAzx0Pwq0I6MA=",
					"tags": {
						"Project": "etla-pipeline"
					},
					"tags_all": {
						"Project": "etla-pipeline"
					},
					"timeout": 10,
					"timeouts": null,
					"vpc_config": []
				},
				"after_unknown": {
					"architectures": true,
					"arn": true,
					"code_sha256": true,
					"dead_letter_config": [],
					"environment": [
						{
							"variables": {}
						}
					],
					"ephemeral_storage": true,
					"file_system_config": [],
					"id": true,
					"image_config": [],
					"invoke_arn": true,
					"last_modified": true,
					"logging_config": true,
					"qualified_arn": true,
					"qualified_invoke_arn": true,
					"role": true,
					"signing_job_arn": true,
					"signing_profile_version_arn": true,
					"snap_start": [],
					"source_code_size": true,
					"tags": {},
					"tags_all": {},
					"tracing_config": true,
					"version": true,
					"vpc_config": []
				},
				"before_sensitive": false,
				"after_sensitive": {
					"architectures": [],
					"dead_letter_config": [],
					"environment": [
						{
							"variables": {}
						}
					],
					"ephemeral_storage": [],
					"file_system_config": [],
					"image_config": [],
					"logging_config": [],
					"snap_start": [],
					"tags": {},
					"tags_all": {},
					"tracing_config": [],
					"vpc_config": []
				}
			}
		},
		{
			"address": "aws_lambda_permission.allow_apigw",
			"mode": "managed",
			"type": "aws_lambda_permission",
			"name": "allow_apigw",
			"provider_name": "registry.terraform.io/hashicorp/aws",
			"change": {
				"actions": [
					"create"
				],
				"before": null,
				"after": {
					"action": "lambda:InvokeFunction",
					"event_source_token": null,
					"function_name": "etla-pipeline-handler",
					"function_url_auth_type": null,
					"principal": "apigateway.amazonaws.com",
					"principal_org_id": null,
					"qualifier": null,
					"region": "us-east-1",
					"source_account": null,
					"statement_id": "AllowAPIGatewayInvoke"
				},
				"after_unknown": {
					"id": true,
					"source_arn": true,
					"statement_id_prefix": true
				},
				"before_sensitive": false,
				"after_sensitive": {}
			}
		},
		{
			"address": "aws_s3_bucket.raw_data",
			"mode": "managed",
			"type": "aws_s3_bucket",
			"name": "raw_data",
			"provider_name": "registry.terraform.io/hashicorp/aws",
			"change": {
				"actions": [
					"create"
				],
				"before": null,
				"after": {
					"bucket": "etla-pipeline-raw",
					"force_destroy": true,
					"region": "us-east-1",
					"tags": {
						"Name": "Raw Data Bucket",
						"Project": "etla-pipeline"
					},
					"tags_all": {
						"Name": "Raw Data Bucket",
						"Project": "etla-pipeline"
					},
					"timeouts": null
				},
				"after_unknown": {
					"acceleration_status": true,
					"acl": true,
					"arn": true,
					"bucket_domain_name": true,
					"bucket_prefix": true,
					"bucket_region": true,
					"bucket_regional_domain_name": true,
					"cors_rule": true,
					"grant": true,
					"hosted_zone_id": true,
					"id": true,
					"lifecycle_rule": true,
					"logging": true,
					"object_lock_configuration": true,
					"object_lock_enabled": true,
					"policy": true,
					"replication_configuration": true,
					"request_payer": true,
					"server_side_encryption_configuration": true,
					"tags": {},
					"tags_all": {},
					"versioning": true,
					"website": true,
					"website_domain": true,
					"website_endpoint": true
				},
				"before_sensitive": false,
				"after_sensitive": {
					"cors_rule": [],
					"grant": [],
					"lifecycle_rule": [],
					"logging": [],
					"object_lock_configuration": [],
					"replication_configuration": [],
					"server_side_encryption_configuration": [],
					"tags": {},
					"tags_all": {},
					"versioning": [],
					"website": []
				},
				"after_identity": {
					"account_id": null,
					"bucket": null,
					"region": null
				}
			}
		},
		{
			"address": "aws_sns_topic.alerts",
			"mode": "managed",
			"type": "aws_sns_topic",
			"name": "alerts",
			"provider_name": "registry.terraform.io/hashicorp/aws",
			"change": {
				"actions": [
					"create"
				],
				"before": null,
				"after": {
					"application_failure_feedback_role_arn": null,
					"application_success_feedback_role_arn": null,
					"application_success_feedback_sample_rate": null,
					"archive_policy": null,
					"content_based_deduplication": false,
					"delivery_policy": null,
					"display_name": null,
					"fifo_topic": false,
					"firehose_failure_feedback_role_arn": null,
					"firehose_success_feedback_role_arn": null,
					"firehose_success_feedback_sample_rate": null,
					"http_failure_feedback_role_arn": null,
					"http_success_feedback_role_arn": null,
					"http_success_feedback_sample_rate": null,
					"kms_master_key_id": null,
					"lambda_failure_feedback_role_arn": null,
					"lambda_success_feedback_role_arn": null,
					"lambda_success_feedback_sample_rate": null,
					"name": "etla-pipeline-alerts",
					"region": "us-east-1",
					"sqs_failure_feedback_role_arn": null,
					"sqs_success_feedback_role_arn": null,
					"sqs_success_feedback_sample_rate": null,
					"tags": null
				},
				"after_unknown": {
					"arn": true,
					"beginning_archive_time": true,
					"fifo_throughput_scope": true,
					"id": true,
					"name_prefix": true,
					"owner": true,
					"policy": true,
					"signature_version": true,
					"tags_all": true,
					"tracing_config": true
				},
				"before_sensitive": false,
				"after_sensitive": {
					"tags_all": {}
				},
				"after_identity": {
					"arn": null
				}
			}
		}
	],
	"configuration": {
		"provider_config": {
			"aws": {
				"name": "aws",
				"full_name": "registry.terraform.io/hashicorp/aws",
				"expressions": {
					"access_key": {
						"constant_value": "mock_access"
					},
					"region": {
						"constant_value": "us-east-1"
					},
					"secret_key": {
						"constant_value": "mock_secret"
					},
					"skip_credentials_validation": {
						"constant_value": true
					},
					"skip_metadata_api_check": {
						"constant_value": true
					},
					"skip_requesting_account_id": {
						"constant_value": true
					}
				}
			}
		},
		"root_module": {
			"resources": [
				{
					"address": "aws_apigatewayv2_api.http_api",
					"mode": "managed",
					"type": "aws_apigatewayv2_api",
					"name": "http_api",
					"provider_config_key": "aws",
					"expressions": {
						"name": {
							"references": [
								"var.project_name"
							]
						},
						"protocol_type": {
							"constant_value": "HTTP"
						}
					},
					"schema_version": 0
				},
				{
					"address": "aws_apigatewayv2_authorizer.cognito_auth",
					"mode": "managed",
					"type": "aws_apigatewayv2_authorizer",
					"name": "cognito_auth",
					"provider_config_key": "aws",
					"expressions": {
						"api_id": {
							"references": [
								"aws_apigatewayv2_api.http_api.id",
								"aws_apigatewayv2_api.http_api"
							]
						},
						"authorizer_type": {
							"constant_value": "JWT"
						},
						"identity_sources": {
							"constant_value": [
								"$request.header.Authorization"
							]
						},
						"jwt_configuration": [
							{
								"audience": {
									"references": [
										"aws_cognito_user_pool_client.auth_client.id",
										"aws_cognito_user_pool_client.auth_client"
									]
								},
								"issuer": {
									"references": [
										"aws_cognito_user_pool.auth_pool.endpoint",
										"aws_cognito_user_pool.auth_pool"
									]
								}
							}
						],
						"name": {
							"references": [
								"var.project_name"
							]
						}
					},
					"schema_version": 0
				},
				{
					"address": "aws_apigatewayv2_integration.lambda_integration",
					"mode": "managed",
					"type": "aws_apigatewayv2_integration",
					"name": "lambda_integration",
					"provider_config_key": "aws",
					"expressions": {
						"api_id": {
							"references": [
								"aws_apigatewayv2_api.http_api.id",
								"aws_apigatewayv2_api.http_api"
							]
						},
						"integration_method": {
							"constant_value": "POST"
						},
						"integration_type": {
							"constant_value": "AWS_PROXY"
						},
						"integration_uri": {
							"references": [
								"aws_lambda_function.bus_event_handler.invoke_arn",
								"aws_lambda_function.bus_event_handler"
							]
						},
						"payload_format_version": {
							"constant_value": "2.0"
						}
					},
					"schema_version": 0
				},
				{
					"address": "aws_apigatewayv2_route.default_route",
					"mode": "managed",
					"type": "aws_apigatewayv2_route",
					"name": "default_route",
					"provider_config_key": "aws",
					"expressions": {
						"api_id": {
							"references": [
								"aws_apigatewayv2_api.http_api.id",
								"aws_apigatewayv2_api.http_api"
							]
						},
						"authorization_type": {
							"constant_value": "JWT"
						},
						"authorizer_id": {
							"references": [
								"aws_apigatewayv2_authorizer.cognito_auth.id",
								"aws_apigatewayv2_authorizer.cognito_auth"
							]
						},
						"route_key": {
							"constant_value": "POST /bus-event"
						},
						"target": {
							"references": [
								"aws_apigatewayv2_integration.lambda_integration.id",
								"aws_apigatewayv2_integration.lambda_integration"
							]
						}
					},
					"schema_version": 0
				},
				{
					"address": "aws_apigatewayv2_stage.default_stage",
					"mode": "managed",
					"type": "aws_apigatewayv2_stage",
					"name": "default_stage",
					"provider_config_key": "aws",
					"expressions": {
						"api_id": {
							"references": [
								"aws_apigatewayv2_api.http_api.id",
								"aws_apigatewayv2_api.http_api"
							]
						},
						"auto_deploy": {
							"constant_value": true
						},
						"name": {
							"constant_value": "$default"
						}
					},
					"schema_version": 0
				},
				{
					"address": "aws_cloudwatch_metric_alarm.high_priority_alerts",
					"mode": "managed",
					"type": "aws_cloudwatch_metric_alarm",
					"name": "high_priority_alerts",
					"provider_config_key": "aws",
					"expressions": {
						"alarm_actions": {
							"references": [
								"aws_sns_topic.alerts.arn",
								"aws_sns_topic.alerts"
							]
						},
						"alarm_description": {
							"constant_value": "Triggers if more than 3 high priority alerts are processed in 5 minutes"
						},
						"alarm_name": {
							"constant_value": "HighPriorityAlertThreshold"
						},
						"comparison_operator": {
							"constant_value": "GreaterThanOrEqualToThreshold"
						},
						"evaluation_periods": {
							"constant_value": 1
						},
						"metric_name": {
							"constant_value": "HighPriorityAlerts"
						},
						"namespace": {
							"constant_value": "ETLA"
						},
						"period": {
							"constant_value": 300
						},
						"statistic": {
							"constant_value": "Sum"
						},
						"threshold": {
							"constant_value": 3
						}
					},
					"schema_version": 1
				},
				{
					"address": "aws_cloudwatch_metric_alarm.lambda_error_alarm",
					"mode": "managed",
					"type": "aws_cloudwatch_metric_alarm",
					"name": "lambda_error_alarm",
					"provider_config_key": "aws",
					"expressions": {
						"alarm_actions": {
							"references": [
								"aws_sns_topic.alerts.arn",
								"aws_sns_topic.alerts"
							]
						},
						"alarm_description": {
							"constant_value": "Triggers if any Lambda errors occur"
						},
						"alarm_name": {
							"constant_value": "LambdaErrorThreshold"
						},
						"comparison_operator": {
							"constant_value": "GreaterThanThreshold"
						},
						"dimensions": {
							"references": [
								"aws_lambda_function.bus_event_handler.function_name",
								"aws_lambda_function.bus_event_handler"
							]
						},
						"evaluation_periods": {
							"constant_value": 1
						},
						"metric_name": {
							"constant_value": "Errors"
						},
						"namespace": {
							"constant_value": "AWS/Lambda"
						},
						"period": {
							"constant_value": 300
						},
						"statistic": {
							"constant_value": "Sum"
						},
						"threshold": {
							"constant_value": 0
						}
					},
					"schema_version": 1
				},
				{
					"address": "aws_cognito_user_pool.auth_pool",
					"mode": "managed",
					"type": "aws_cognito_user_pool",
					"name": "auth_pool",
					"provider_config_key": "aws",
					"expressions": {
						"name": {
							"references": [
								"var.project_name"
							]
						}
					},
					"schema_version": 0
				},
				{
					"address": "aws_cognito_user_pool_client.auth_client",
					"mode": "managed",
					"type": "aws_cognito_user_pool_client",
					"name": "auth_client",
					"provider_config_key": "aws",
					"expressions": {
						"allowed_oauth_flows_user_pool_client": {
							"constant_value": true
						},
						"explicit_auth_flows": {
							"constant_value": [
								"ALLOW_USER_PASSWORD_AUTH",
								"ALLOW_REFRESH_TOKEN_AUTH"
							]
						},
						"generate_secret": {
							"constant_value": false
						},
						"name": {
							"references": [
								"var.project_name"
							]
						},
						"user_pool_id": {
							"references": [
								"aws_cognito_user_pool.auth_pool.id",
								"aws_cognito_user_pool.auth_pool"
							]
						}
					},
					"schema_version": 0
				},
				{
					"address": "aws_dynamodb_table.bus_data",
					"mode": "managed",
					"type": "aws_dynamodb_table",
					"name": "bus_data",
					"provider_config_key": "aws",
					"expressions": {
						"attribute": [
							{
								"name": {
									"constant_value": "RouteNumber"
								},
								"type": {
									"constant_value": "S"
								}
							},
							{
								"name": {
									"constant_value": "OccurredOn"
								},
								"type": {
									"constant_value": "S"
								}
							}
						],
						"billing_mode": {
							"constant_value": "PAY_PER_REQUEST"
						},
						"hash_key": {
							"constant_value": "RouteNumber"
						},
						"name": {
							"references": [
								"var.project_name"
							]
						},
						"range_key": {
							"constant_value": "OccurredOn"
						},
						"tags": {
							"references": [
								"var.project_name"
							]
						}
					},
					"schema_version": 1
				},
				{
					"address": "aws_iam_policy.lambda_policy",
					"mode": "managed",
					"type": "aws_iam_policy",
					"name": "lambda_policy",
					"provider_config_key": "aws",
					"expressions": {
						"name": {
							"references": [
								"var.project_name"
							]
						},
						"policy": {
							"references": [
								"aws_s3_bucket.raw_data.arn",
								"aws_s3_bucket.raw_data",
								"aws_dynamodb_table.bus_data.arn",
								"aws_dynamodb_table.bus_data"
							]
						}
					},
					"schema_version": 0
				},
				{
					"address": "aws_iam_policy_attachment.lambda_custom_policy",
					"mode": "managed",
					"type": "aws_iam_policy_attachment",
					"name": "lambda_custom_policy",
					"provider_config_key": "aws",
					"expressions": {
						"name": {
							"constant_value": "lambda-custom-policy-attachment"
						},
						"policy_arn": {
							"references": [
								"aws_iam_policy.lambda_policy.arn",
								"aws_iam_policy.lambda_policy"
							]
						},
						"roles": {
							"references": [
								"aws_iam_role.lambda_exec.name",
								"aws_iam_role.lambda_exec"
							]
						}
					},
					"schema_version": 0
				},
				{
					"address": "aws_iam_role.lambda_exec",
					"mode": "managed",
					"type": "aws_iam_role",
					"name": "lambda_exec",
					"provider_config_key": "aws",
					"expressions": {
						"assume_role_policy": {},
						"name": {
							"references": [
								"var.project_name"
							]
						}
					},
					"schema_version": 0
				},
				{
					"address": "aws_iam_role_policy_attachment.lambda_logs",
					"mode": "managed",
					"type": "aws_iam_role_policy_attachment",
					"name": "lambda_logs",
					"provider_config_key": "aws",
					"expressions": {
						"policy_arn": {
							"constant_value": "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
						},
						"role": {
							"references": [
								"aws_iam_role.lambda_exec.name",
								"aws_iam_role.lambda_exec"
							]
						}
					},
					"schema_version": 0
				},
				{
					"address": "aws_lambda_function.bus_event_handler",
					"mode": "managed",
					"type": "aws_lambda_function",
					"name": "bus_event_handler",
					"provider_config_key": "aws",
					"expressions": {
						"environment": [
							{
								"variables": {
									"references": [
										"aws_s3_bucket.raw_data.bucket",
										"aws_s3_bucket.raw_data",
										"aws_dynamodb_table.bus_data.name",
										"aws_dynamodb_table.bus_data"
									]
								}
							}
						],
						"filename": {
							"constant_value": "lambda_function_payload.zip"
						},
						"function_name": {
							"references": [
								"var.project_name"
							]
						},
						"handler": {
							"constant_value": "main.handler"
						},
						"role": {
							"references": [
								"aws_iam_role.lambda_exec.arn",
								"aws_iam_role.lambda_exec"
							]
						},
						"runtime": {
							"constant_value": "python3.11"
						},
						"source_code_hash": {},
						"tags": {
							"references": [
								"var.project_name"
							]
						},
						"timeout": {
							"constant_value": 10
						}
					},
					"schema_version": 0
				},
				{
					"address": "aws_lambda_permission.allow_apigw",
					"mode": "managed",
					"type": "aws_lambda_permission",
					"name": "allow_apigw",
					"provider_config_key": "aws",
					"expressions": {
						"action": {
							"constant_value": "lambda:InvokeFunction"
						},
						"function_name": {
							"references": [
								"aws_lambda_function.bus_event_handler.function_name",
								"aws_lambda_function.bus_event_handler"
							]
						},
						"principal": {
							"constant_value": "apigateway.amazonaws.com"
						},
						"source_arn": {
							"references": [
								"aws_apigatewayv2_api.http_api.execution_arn",
								"aws_apigatewayv2_api.http_api"
							]
						},
						"statement_id": {
							"constant_value": "AllowAPIGatewayInvoke"
						}
					},
					"schema_version": 0
				},
				{
					"address": "aws_s3_bucket.raw_data",
					"mode": "managed",
					"type": "aws_s3_bucket",
					"name": "raw_data",
					"provider_config_key": "aws",
					"expressions": {
						"bucket": {
							"references": [
								"var.project_name"
							]
						},
						"force_destroy": {
							"constant_value": true
						},
						"tags": {
							"references": [
								"var.project_name"
							]
						}
					},
					"schema_version": 0
				},
				{
					"address": "aws_sns_topic.alerts",
					"mode": "managed",
					"type": "aws_sns_topic",
					"name": "alerts",
					"provider_config_key": "aws",
					"expressions": {
						"name": {
							"references": [
								"var.project_name"
							]
						}
					},
					"schema_version": 0
				}
			],
			"variables": {
				"project_name": {
					"default": "etla-pipeline"
				}
			}
		}
	},
	"relevant_attributes": [
		{
			"resource": "aws_apigatewayv2_api.http_api",
			"attribute": [
				"execution_arn"
			]
		},
		{
			"resource": "aws_cognito_user_pool.auth_pool",
			"attribute": [
				"id"
			]
		},
		{
			"resource": "aws_lambda_function.bus_event_handler",
			"attribute": [
				"invoke_arn"
			]
		},
		{
			"resource": "aws_cognito_user_pool_client.auth_client",
			"attribute": [
				"id"
			]
		},
		{
			"resource": "aws_dynamodb_table.bus_data",
			"attribute": [
				"name"
			]
		},
		{
			"resource": "aws_iam_role.lambda_exec",
			"attribute": [
				"name"
			]
		},
		{
			"resource": "aws_dynamodb_table.bus_data",
			"attribute": [
				"arn"
			]
		},
		{
			"resource": "aws_sns_topic.alerts",
			"attribute": [
				"arn"
			]
		},
		{
			"resource": "aws_apigatewayv2_authorizer.cognito_auth",
			"attribute": [
				"id"
			]
		},
		{
			"resource": "aws_cognito_user_pool.auth_pool",
			"attribute": [
				"endpoint"
			]
		},
		{
			"resource": "aws_lambda_function.bus_event_handler",
			"attribute": [
				"function_name"
			]
		},
		{
			"resource": "aws_apigatewayv2_api.http_api",
			"attribute": [
				"id"
			]
		},
		{
			"resource": "aws_apigatewayv2_integration.lambda_integration",
			"attribute": [
				"id"
			]
		},
		{
			"resource": "aws_iam_policy.lambda_policy",
			"attribute": [
				"arn"
			]
		},
		{
			"resource": "aws_s3_bucket.raw_data",
			"attribute": [
				"arn"
			]
		},
		{
			"resource": "aws_iam_role.lambda_exec",
			"attribute": [
				"arn"
			]
		},
		{
			"resource": "aws_s3_bucket.raw_data",
			"attribute": [
				"bucket"
			]
		}
	],
	"timestamp": "2025-08-04T19:27:05Z",
	"applyable": true,
	"complete": true,
	"errored": false
}